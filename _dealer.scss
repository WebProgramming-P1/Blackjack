@import "variables";

@function toMs($value) {
	@return #{$value}ms
}

#start:checked {

}

label[for=start] {
	padding       : 10px 20px;
	background    : #AE705E;
	border-radius : 5px;
	width         : 50px;
	height        : 20px;
	text-align    : center;
	display       : inline-block;
	font-weight   : bold;
	color         : #FFFFFF;
	float         : right;
	margin        : 50px;
	top           : 0;
	right         : 0;
	position      : absolute;
}

.cards {
	//width         : 100vw;
	text-align : center;
	margin     : auto;

	.card {
		$cardWidth : 100px;

		display          : inline-block;
		position         : absolute;
		transform-origin : 75% 0;
		top              : 10vh;
		width            : $cardWidth;
		height           : 145px;
		margin-left      : $cardWidth / -2;
	}
}

#start {
	$targetDeg : 180 * 1 / 3;
	$degIncrement : $targetDeg / length($cards);
	$deg : $targetDeg / -2;

	opacity : 0;

	&:not(:checked) ~ {
		*, .cards .card {
			opacity : 0;
		}
		.cards .card {
			transform : rotateZ(#{$deg}deg);
		}
		label[for=start] {
			opacity : 1;
		}
	}

	&:checked {
		~ {
			$card-anim-1-duration : 1000;
			$card-anim-2-duration : 1000;

			*, .cards .card {
				opacity                    : 1;
				transition-property        : opacity, top, transform;
				transition-timing-function : ease;
				transition-duration        : toMs($card-anim-1-duration);
			}
			label[for=start] {
				transition : top 0s ease toMs($card-anim-1-duration), opacity toMs($card-anim-1-duration) ease 0s;
			}

			$delay : 0;
			$delayIncrement : 400;
			@each $card in $cards {
				$value : #{nth($card, 1)};
				$suit : #{nth($card, 2)};
				.cards .card.#{$value}.#{$suit} {
					transform       : rotateZ(#{$deg}deg);
					animation-delay : toMs($card-anim-1-duration + $delay);
				}

				$delay : $delay + $delayIncrement;
				$deg : $deg + $degIncrement;
			}

			.cards .card {
				//animation           : deal 1s;
				animation-name      : deal;
				animation-duration  : toMs($card-anim-2-duration);
				animation-fill-mode : forwards;
				//animation-delay     : $card-anim-1-duration;
			}

			label[for=start] {
				opacity : 0;
				top     : -1000%;
			}
		}
	}
}

@keyframes deal {
	0% {
		//top : 0;
	}
	100% {
		top : 50vh;
	}
}